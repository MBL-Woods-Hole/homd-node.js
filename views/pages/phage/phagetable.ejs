<% var cfg = JSON.parse(config) %> 
<style>
/* Fix the tax table header */
thead th { position: sticky; top: 0; }
#phage-box{
    width:100%;
}
#phage-table{

  border: 1px solid black;
  /* table-layout: fixed; */
  

}
#phage-table th{
   border-right:1px solid ivory;
}
.w-med{
    width:140px;
    text-align:center;
}
.w-vsm{
    width:60px;
    text-align:center;
}
.w-sm{
    width:90px;
    text-align:center;
}
.w-exp{
    min-width:150px;
    text-align:left;
}
/* Tools Menu  */
.dropbtn {
  background-color: #04AA6D;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
  z-index: -1;
}

/* The container <div> - needed to position the dropdown content */
.dd-menu {
  position: relative;
  display: inline-block;
}

/* Dropdown Content (Hidden by Default) */
.dropdown-content {
  display: none;
  position: absolute;
  background:lightblue;
  width:165px;  /* This sets the box width to allow cursor contact */
  padding:8px;
  margin:0px;
  border:1px solid black;
  left:-160px;
  top:-50px;
  z-index: 1;
}

/* Links inside the dropdown */
.dropdown-content a {
  font-size:13px;
  margin:5px 0;
  display: block;
}

/* Change color of dropdown links on hover */
.dropdown-content a:hover {
    background-color: white;
    border:1px solid tomato;
    color:black;
    
}

/* Show the dropdown menu on hover */
.dd-menu:hover .dropdown-content {display: block;}

/* Change the background color of the dropdown button when the dropdown content is shown */
.dd-menu:hover .dropbtn {background-color: #3e8e41;}
</style>
<% var datarows = JSON.parse(data) %>
<link rel="stylesheet" type="text/css" href="/css/phage_pages.css" >
<%- include('../../partials/header_html'); %>




<body>
  <div id="loader" class="center-loader"></div>
  <div id='wrapper'>
    <%- include('../../partials/header_img'); %>
    <%- include('../../partials/navbar'); %>
    <div class='page-content' >
      
         <p class='h3 title'>Genomes with Phage Predictions <small>(<span class='red-text'>in Beta</span>)</small></p>

<div class='red-text' align="center" >
    Warning: Phage predictions were made with <a href="https://github.com/mtisza1/Cenote-Taker3" target='_blank'>Cenote-Taker3</a> and 
    <a href="https://github.com/apcamargo/genomad/" target='_blank'>geNomad</a>, and have not been manually curated. Please use caution when interpreting the results.
</div>
<div id='phage-box' >

    
         <table id='phage-table' class='table table-hover table-condensed sortable' >
         <thead>
          <tr>
           <th class='w-med'>Genome-ID</th>
           <th class='w-sm'>HMT-ID</th>
           <th class='w-vsm'>Body<br>Site</th>
           <th class='w-exp'>Species</th>
           <th class='w-exp'>Strain</th>
           <th class='w-vsm'>Contigs</th>
           <th class='w-sm'>Genome<br>Size</th>
           <th class='w-sm'>Cenote-Taker3<br>Counts</th>
           <th class='w-sm'>Cenote Coverage bps</th>
           <th class='w-sm'>Cenote Coverage Percent</th>
           
           <th class='w-sm'>geNomad<br>Counts</th>
           <th class='w-sm'>geNomad Coverage bps</th>
           <th class='w-sm'>geNomad Coverage Percent</th>
           <th class='w-sm sorttable_nosort'>Predictions Table</th>
           
           <th class='w-vsm sorttable_nosort'>FTP</th>
          </tr>
         </thead>
         <tbody>
         <% for (n in datarows){ %>
             <% taxidfullname = "HMT-"+("000" + datarows[n].otid).slice(-3); %>
             <tr>
             <td class='w-med'><a href='/genome/genome_description?gid=<%= datarows[n].gid %>'><%= datarows[n].gid %></a></td>
             
             <td class='w-sm'><a href='/taxa/tax_description?gid=<%= datarows[n].gid %>&otid=<%= datarows[n].otid %>'><%= taxidfullname %></a></td>
             <td class='w-vsm'><%= datarows[n].site %></td>
             <td class='w-exp' title='<%= datarows[n].genus %> <%= datarows[n].species %>'><%= datarows[n].genus %> <%= datarows[n].species %></td>
             <td class='w-exp' title='<%= datarows[n].strain %>'><%= datarows[n].strain %></td>
             <td class='w-vsm'><%= datarows[n].contigs %></td>
             <td class='w-sm'><%= datarows[n].size %></td>
             <td class='w-sm'><%= datarows[n].cenote %></td>
             
             <% if(datarows[n].cenote == 0) { %>
                <td class='w-sm'>0</td>
                <td class='w-sm'>0</td>
             <% }else{ %>
                <td class='w-sm'><%= datarows[n].cenote_coverage_bps %></td>
                <td class='w-sm'><%= datarows[n].cpct %>%</td>
             <% } %>
             
             <td class='w-sm'><%= datarows[n].genomad %></td>
             <% if(datarows[n].genomad == 0) { %>
                <td class='w-sm'>0</td>
                <td class='w-sm'>0</td>
             <% }else{ %>
                <td class='w-sm'><%= datarows[n].genomad_coverage_bps %></td>
                <td class='w-sm'><%= datarows[n].gpct %>%</td>
             <% } %>
             
             
             <td class='w-sm'><a href='/phage/phage?gid=<%= datarows[n].gid %>'>hits</a></td>
             
            <td class='w-vsm'><a href='<%= cfg.HOMD_URL_BASE %>/ftp/phages/V1.1/genomes_individual/<%= datarows[n].gid %>/' target='_blank'>link
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-right-square" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm5.854 8.803a.5.5 0 1 1-.708-.707L9.243 6H6.475a.5.5 0 1 1 0-1h3.975a.5.5 0 0 1 .5.5v3.975a.5.5 0 1 1-1 0V6.707z"/>
            </svg>
            </a></td>
             
            
                
                
             </tr>
         <% } %>
         </tbody>
         </table>
         
</div>  <!-- end: phage-box -->
      
    </div> <!-- end: page-content -->
    <div id='footer'>
         <%- include('../../partials/footer'); %>
    </div>
       
   
  </div> <!-- end wrapper -->
</body>

</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/genomes.js"></script>
<script type="text/javascript" src="/js/sorttable.js"></script> <!-- https://www.kryogenix.org/code/browser/sorttable -->
<script type="text/javascript" src="/js/menu.js"></script>
<script type="text/javascript" src="/js/phage.js"></script>
<script>
  mainmenu()
  var jb_path = '<%- cfg.JBROWSE_URL %>'
</script>



