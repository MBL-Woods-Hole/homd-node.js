<style>
thead th { position: sticky; top: 0; }

table {
	width: 900px;
	margin: 100px auto 0;
	tr {
		border-bottom: 1px solid #ddd;
		&:hover, &:focus {
			td {
				background-color: #eee;
				ul {
					display: block;
				}
			}
		}
		&.bold {
			&:hover {
				td {
					background-color: #fff;
				}
			}
		}
		td {
			padding:0 15px;
			position: relative;
			ul {
				position: absolute;
				display: none;
                   /*  width: 120px; */
				top: 5px;
				right: 10px;
				margin: 0;
				padding: 5px;
				background-color: #fff;
				box-shadow: 0 2px 10px rgba(0,0,0,0.2);
				border-radius: 3px;
				z-index: 100;
				table {
					    width:100%;
						padding: 7px;
						display: block;
						text-decoration: none;
						border-radius: 3px;
						color: #555;
						
						&:hover {
							background-color: yellow;
							color: black;
						}
					
				}
			}
		}
	}
}
</style>
<% var cfg = JSON.parse(config) %> 
<% //var genomelist = JSON.parse(gid_list) %>
<% var cdata = JSON.parse(crispr_data) %>
<%- include('../../partials/header_html'); %>

<body>
    <div id='wrapper'>
    <%- include('../../partials/header_img'); %>
    <%- include('../../partials/navbar'); %>
    
    
    <div class='page-content' >
              
       <p class='title h3'>CRISPR-Cas systems detected in countXX HOMD genomes</p>
       
       
       
       
       
       
       <div id='crispr-table-div'>
       <table id='crispr-table' class='table table-hover table-condensed sortable'>
       <thead>
        <tr>
            <th class='center col1'>Genome-ID</th>
            <th class='center col1'>Taxon-ID</th>
            <th>Organism</th>
            <th class='center col1'>Contigs</th>
            <th class='center'>Length (bp)</th>
            <th class='left' nowrap>CRISPR-Cas Count</th>
        </tr>
       </thead>
       <tbody>
       <% for(gid in cdata){ %>
       
       <% taxidfullname = 'HMT-'+("000" + cdata[gid].otid).slice(-3); %>
       
       <tr>
           <td class='center'><a href='genome_description?gid=<%= gid %>'><%= gid %></a></td>
           <td class='center' nowrap><a href='/taxa/tax_description?otid=<%= cdata[gid].otid %>'><%= taxidfullname %></a></td>
           <td><i><%= cdata[gid].organism %></i></td>
           <td class='center'><%= cdata[gid].contigs %></td>
           <td class='center'><%= cdata[gid].length.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); %></td>
           <td id="cell1"><%= cdata[gid].crispr.length %></td>
           <td>
           <ul>
             <table>
             <tr><th>Contig</th><th>Operon</th><th>Operon Pos</th>
             <th>Prediction</th><th>CRISPRs</th><th>Dist</th>
             <th>Prediction-Cas</th><th>Prediction-CRISPRs</th>
             </tr>
             <% for(let i = 0; i < cdata[gid].crispr.length; i++){ %>
                <tr>
                <td><%= cdata[gid].crispr[i].contig %></td>
                <td><%= cdata[gid].crispr[i].operon %></td>
                <td><%= cdata[gid].crispr[i].operon_pos %></td>
                <td><%= cdata[gid].crispr[i].prediction %></td>
                <td><%= cdata[gid].crispr[i].crisprs %></td>
                <td><%= cdata[gid].crispr[i].distances %></td>
                <td><%= cdata[gid].crispr[i].prediction_cas %></td>
                <td><%= cdata[gid].crispr[i].prediction_crisprs %></td>
                </tr>
             <% } %>
             </table>
           </ul>
           </td>
       </tr>
           
       <% } %>
       </tbody>
       </table>
       
       </div>
    
<div id="popupMenu" style="display: none;">
  <ul>
    <li>Option 1</li>
    <li>Option 2</li>
    <li>Option 3</li>
  </ul>
</div>

  
    </div> <!-- end: page-content -->
    
    <div id='footer'>
         <%- include('../../partials/footer'); %>
    </div>
       
</body>

</html>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/menu.js"></script>
<script type="text/javascript" src="/js/genomes.js"></script>
<script type="text/javascript" src="/js/sorttable.js"></script> <!-- https://www.kryogenix.org/code/browser/sorttable -->
<script>
  mainmenu()
  $(document).ready(function() {
  $('#cell1').hover(
    function() {
      var offset = $(this).offset();
      $('#popupMenu').css({
        top: offset.top + $(this).outerHeight(),
        left: offset.left
      }).fadeIn(200);
    },
    function() {
      $('#popupMenu').fadeOut(200);
    }
  );
});
</script>


