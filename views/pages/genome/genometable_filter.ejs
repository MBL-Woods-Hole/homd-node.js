<style>
.form-inline {
  display: inline;
}
.span_lnk {
  color:blue;
  cursor: pointer;
}
/* Fix the tax table header */
thead th { position: sticky; top: 0; }
</style>
<link rel="stylesheet" type="text/css" href="/css/genome_pages.css" >
<%- include('../../partials/header_html'); %>
<% ginfo = JSON.parse(data) %>
<% fltr = JSON.parse(filter) %>
<% phyla = JSON.parse(phyla) %>
<% page_data = JSON.parse(page_data) %>
<% var cfg = JSON.parse(config) %> 


<body>
 <div id="loader" class="center-loader" style='z-index:1'></div>

  <div id='wrapper'>    
       
  <div id='header'>
       <%- include('../../partials/header_img'); %>
    </div>
  
  <%- include('../../partials/navbar'); %>
  
  
  <div  class='page-content' >


 <%- include('../../partials/genome_table_filter2.ejs') %> 
<br><%- count_txt %>

  
<div id='genome-box'>
     
     
<table id='gnom-table' class='table table-hover table-condensed sortable' style='background: lightgrey;'>
<thead>
<tr>
<th class='col2' scope="col" >SEQ-ID</th>
<th class='col2' >TaxID</th>
<th class='' scope="col" >Genus</th>
<th class='' scope="col" >Species</th>
<th class='col3' scope="col" >Strain/Culture</th>

<th class='col1' scope="col" >Contigs</th>
<th class='col2' scope="col" >Combined<br>Length</th>
<th class='col1' scope="col" >GC(%)</th>
<th class="col9 sorttable_nosort"  >Genome Info and Tools</th>
<th class="col10 sorttable_nosort" >Annotations</th>
</tr>
</thead>
<tbody>

<% for(n in ginfo){ %>
  <% taxidfullname = 'HMT-'+("000" + ginfo[n].otid).slice(-3); %>
  <tr class="">
    <td class='linkout center'><a href="genome_description?gid=<%= ginfo[n].gid %>"> <%= ginfo[n].gid %></a></td>
    <td class='linkout center' nowrap ><a href='/taxa/tax_description?otid=<%= ginfo[n].otid %>'><%= taxidfullname %></a></td>
    <td class='tax_name'><a href='/taxa/life?rank=genus&name=<%= ginfo[n].genus %>'><em><%= ginfo[n].genus %></em></a></td>
    <td class='tax_name'><a href='/taxa/tax_description?otid=<%= ginfo[n].otid %>'><em><%= ginfo[n].species %></em></a></td>
    <td class='tax_name'><em><%= ginfo[n].ccolct %></em></td>
    
    <td class='center'><%= ginfo[n].ncontigs %></td>
    <td class='center'><%= ginfo[n].tlength %></td>
    
    <td class='center'><%= ginfo[n].gc %></td>
    <% gc2 = (parseFloat(ginfo[n].gc)/100).toFixed(2) %>
    <td class='center' nowrap><a class='pill pill-indigo' href='/taxa/tax_description?otid=<%= ginfo[n].otid %>'>Taxon Info</a>
        <a class='pill pill-khaki' href='genome_description?gid=<%= ginfo[n].gid %>'>Genome Info</a>
        <a class='pill pill-lightseagreen' href='<%= cfg.JBROWSE_URL %>/<%= ginfo[n].gid %>&tracks=DNA,prokka,prokka_ncrna,ncbi,ncbi_ncrna,homd,GCContent,GCSkew' target='_blank' rel="noopener noreferrer">Genome Viewer</a>
        
       <form name='' class="form-inline" method='POST' action='blast_ss_single'>
         <input type='hidden' name='gid' value='<%= ginfo[n].gid %>'>
         <input type='hidden' name='annotation' value='prokka'>
         <input type='submit' class='pill pill-midnightblue' value='BLAST'>
       </form>
       
      <!--  <a class='pill pill-midnightblue' href='/genome_blast_single?gid=<%= ginfo[n].gid %>' target='_blank'>BLAST</a> -->
       
        </td>
        
        <td class='center'>
        <a class='pill pill-mediumorchid' href='explorer?gid=<%= ginfo[n].gid %>&anno=prokka'>PROKKA</a>
        <a class='pill pill-slateblue' href='explorer?gid=<%= ginfo[n].gid %>&anno=ncbi'>NCBI</a>
        <!-- <span class="badge badge-light">HOMD</span></td> -->
  </tr>
<% } %>

</tbody>
</table>
  </div>  <!-- end genome-box -->
    
  
    </div> <!-- end: page-content -->
    
    <div id='footer'>
         <%- include('../../partials/footer'); %>
    </div>
       
   
  </div> <!-- end wrapper -->
</body>

</html>

<script type="text/javascript" src="/js/jquery-2.1.1.min.js"></script> 
<script type="text/javascript" src="/js/genomes.js"></script>

<script type="text/javascript" src="/js/sorttable.js"></script> <!-- https://www.kryogenix.org/code/browser/sorttable -->
<script type="text/javascript" src="/js/menu.js"></script>
<script>
    mainmenu()  // function in public/js/menu.js
  var letter = '<%- fltr.letter %>'
  if(letter && letter !== '0'){
    document.getElementById(letter).style.color = 'red'
    document.getElementById(letter).style.fontSize = 'medium'
  }
  
   document.onreadystatechange = function() {
            if (document.readyState !== "complete") {
                document.querySelector(
                  '#genome-box').style.visibility = "hidden";
                document.querySelector(
                  "#loader").style.visibility = "visible";
                
            } else {
                document.querySelector(
                  "#loader").style.display = "none";
                document.querySelector(
                  '#genome-box').style.visibility = "visible";
                
                  
            }
        };
</script>

