
<% var s = JSON.parse(stats) %>
<%- include('../partials/header_html'); %>
<style>
.container{
  display: grid;
  background-color: DarkSlateGray;
  grid-template-columns: auto auto;
  
}
.box{
  background-color: var(--title-bg);
  padding:20px;
  margin:20px;
  font-size: 20px;
}
.stat{
   color:Maroon;
}
.page-content{
   
   background-color: DarkSlateGray;
}
.stat-table{
   margin:15px 0;
   font-size:12px;
   width:100%;
}
.stat-table th{
   padding:10px 5px 1px 5px;
   text-align:center;
   font-size:13px;
}
.stat-table td{
   padding:1px 15px;
   text-align:center;
   border-bottom:1px solid grey;
}
.left{
  text-align:left;
}
.right{
  text-align:right;
}
.link{
   text-decoration:underline;
}
</style>
<body>
    <div id='wrapper'>
    <%- include('../partials/header_img'); %>
    <%- include('../partials/navbar'); %>
    
    <div class='page-content'>
       <p class='h3 title'>HOMD Statistics</p>
<div class='container'>
  <div class='box'>
    <li class='center link'><a href='/refseq/refseq_table'>Reference Sequences</a></li>
    <% const refseq_count = new Intl.NumberFormat().format(s.refseqs.count) %>
    There are <span class='stat'><%= refseq_count %></span> HOMD RefSeqs 
    <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    representing <span class='stat'><%= s.refseq_otids.count %> (<%= s.refseq_otids.pct_of_taxa %>%)</span> of the HOMD taxa.
    
  </div>
  <div class='box'>
    <li class='center link'><a href='/phage/phage_table'>Phage</a></li>
    <% const phage_count = new Intl.NumberFormat().format(s.phage.count) %>
    <% const genome_w_phage_count = new Intl.NumberFormat().format(s.genome_w_phage.count) %>
    There are <span class='stat'><%= phage_count %></span> phage predictions
    <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    associated with 
    <span class='stat'><%= genome_w_phage_count %> (<%= s.genome_w_phage.pct_of_genomes %>%)</span> of the HOMD genomes.
    
    
  </div>
  <div class='box'>
    <li class='center link'><a href='/taxa/taxon_table'>Taxa</a></li>
    There are <span class='stat'><%= s.taxon_count %></span> taxa in the HOMD database.
   
    
       <li> 
        <table class='stat-table'>
          <tr><th colspan='2'>Naming Status</th></tr>
          <tr><td class='right'>Named and Cultivated</td><td class='left stat'><%= s.taxa_status_named_cult.count %> (<%= s.taxa_status_named_cult.pct_of_taxa %>%) </td></tr>
          <tr><td class='right'>Named and Uncultivated</td><td class='left stat'><%= s.taxa_status_named_uncult.count %> (<%= s.taxa_status_named_uncult.pct_of_taxa %>%) </td></tr>
          <tr><td class='right'>Unnamed and Cultivated</td><td class='left stat'><%= s.taxa_status_unnamed_cult.count %> (<%= s.taxa_status_unnamed_cult.pct_of_taxa %>%) </td></tr>
          <tr><td class='right'>Phylotype</td><td class='left stat'><%= s.taxa_status_phylotype.count %> (<%= s.taxa_status_phylotype.pct_of_taxa %>%) </td></tr>
      
          <tr><th colspan='2'>Primary Body Site</th></tr>
          <tr><td class='right'>Oral</td><td class='left stat'><%= s.taxa_site_oral.count %> (<%= s.taxa_site_oral.pct_of_taxa %>%) </td></tr>
          <tr><td class='right'>Nasal</td><td class='left stat'><%= s.taxa_site_nasal.count %> (<%= s.taxa_site_nasal.pct_of_taxa %>%) </td></tr>
          <tr><td class='right'>Skin</td><td class='left stat'><%= s.taxa_site_skin.count %> (<%= s.taxa_site_skin.pct_of_taxa %>%) </td></tr>
          <tr><td class='right'>Gut</td><td class='left stat'><%= s.taxa_site_gut.count %> (<%= s.taxa_site_gut.pct_of_taxa %>%) </td></tr>
          <tr><td class='right'>Vaginal</td><td class='left stat'><%= s.taxa_site_vaginal.count %> (<%= s.taxa_site_vaginal.pct_of_taxa %>%) </td></tr>
          <tr><td class='right'>Pathogen</td><td class='left stat'><%= s.taxa_site_path.count %> (<%= s.taxa_site_path.pct_of_taxa %>%) </td></tr>
          <tr><td class='right'>Environmental</td><td class='left stat'><%= s.taxa_site_env.count %> (<%= s.taxa_site_env.pct_of_taxa %>%) </td></tr>
          <tr><td class='right'>Reference</td><td class='left stat'><%= s.taxa_site_ref.count %> (<%= s.taxa_site_ref.pct_of_taxa %>%) </td></tr>
    
          <tr><th colspan='2'>Phyla Represented</th></tr>
          <% for(var n in s.taxa_phyla){ %>
             <tr><td class='right'><%= s.taxa_phyla[n].phyla %></td><td class='left stat'><%= s.taxa_phyla[n].taxcnt %></td></tr>
          <% } %>
       </table>
    </li>
    
    
  </div>
  <div class='box'>
    <li class='center link'><a href='/genome/genome_table'>Genomes</a></li>
    <% const genome_count = new Intl.NumberFormat().format(s.genome_count) %>
    <% const complete = new Intl.NumberFormat().format(s.genome_assembly_complete.count) %>
    <% const contig = new Intl.NumberFormat().format(s.genome_assembly_contig.count) %>
    <% const scaffold = new Intl.NumberFormat().format(s.genome_assembly_scaffold.count) %>
    <% const mags = new Intl.NumberFormat().format(s.genome_mags.count) %>
    
    <% const min_size = new Intl.NumberFormat().format(s.genome_min_length) %>
    <% const max_size = new Intl.NumberFormat().format(s.genome_max_length) %>
    There are <span class='stat'><%= genome_count %></span> genomes in HOMD 
    <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    representing <span class='stat'><%= s.taxa_with_genomes.count %> (<%= s.taxa_with_genomes.pct_of_taxa %>%)</span> of the HOMD taxa.
    <table class='stat-table'>
        <tr><th colspan='2'>Genome Assembly Level</th></tr>
        <tr><td class='right'>Complete</td><td class='left stat'><%= complete %> (<%= s.genome_assembly_complete.pct_of_genomes %>%) </td></tr>
        <tr><td class='right'>Contig</td><td class='left stat'><%= contig %> (<%= s.genome_assembly_contig.pct_of_genomes %>%) </td></tr>
        <tr><td class='right'>Scaffold</td><td class='left stat'><%= scaffold %> (<%= s.genome_assembly_scaffold.pct_of_genomes %>%) </td></tr>
        
        
        <tr><td class='right'>Chromosome</td><td class='left stat'><%= s.genome_assembly_chromosome.count %> (<%= s.genome_assembly_chromosome.pct_of_genomes %>%) </td></tr>
        <tr><th colspan='2'>MAGs</th></tr>
        <tr><td class='right'>MAGs</td><td class='left stat'><%= mags %> (<%= s.genome_mags.pct_of_genomes %>%) </td></tr>
        <tr><th colspan='2'>Contigs per Genome</th></tr>
        <tr><td class='right'>Number of Contigs</td><td class='left stat'>Range: <%= s.genome_min_contigs %> - <%= s.genome_max_contigs %> </td></tr>
        <tr><th colspan='2'>Genome Size</th></tr>
        <tr><td class='right'>Genome Size (bp)</td><td class='left stat'>Range: <%= min_size %> - <%= max_size %> </td></tr>
        
        
    </table>
  </div>
  
    
</div>   <!-- End flex container -->

</div> <!-- end: page-content-->
    
<div id='footer'>
<%- include('../partials/footer'); %>
</div>
       
</body>

</html>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/menu.js"></script>
<script>
  mainmenu()
</script>


