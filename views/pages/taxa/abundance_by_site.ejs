<style>
td a {
   color:blue;
}
#level-table {
   border-collapse: collapse;
}
#level-table th,td {
   padding: 2px 10px;
   border:1px solid black;
   border-collapse: collapse;
}
.level-button{
     border:2px solid green;
     color: black;
     background: #e9ffdb;
     border-radius:2px;
     padding:2px 5px;
     
}
.level-button a{
     color: white;
}
#level-container{
  padding:20px 0 0 0;
}
#button-group{
   padding:10px 0 0 0;
}
table{
   border-collapse:collapse;
}
.site-table{
   border-collapse:collapse;
   font-size:14px;
   
}
#master td{
  padding:3px;
}
.header{
   background:lightblue;
   border:1px solid orange;
   width:100%;
}
</style>
<% sitedata = JSON.parse(data) %>
<%- include('../../partials/header_html'); %>
<% if(rank == 'klass') { %>
<%  showrank = 'Class' %>
<% }else{ %>
<%  showrank = rank.charAt(0).toUpperCase() + rank.slice(1) %>
<% } %>

<body>
    <div id='wrapper'>
    <%- include('../../partials/header_img'); %>
    <%- include('../../partials/navbar'); %>
    <div class='page-content' >
     <div class='title'>Abundance by Oral Habitat</div>
     <a id='download_browser_text_excel'  href='/download#abundance' >Download Options</a>   
     
      <center>
      <div id='level-container' >
         
        <small>[Select a Rank:]</small> 
        <div id='button-group'> 
        <!-- <a class='level-button' type='button' href='#' id='domain' onclick="change_level('domain')">Domain</a>  -->
        <a  class='level-button' href='/taxa/abundance_by_site/phylum' id='phylum' >Phylum</a> 
        &gt; <a class='level-button' type='button'  href='/taxa/abundance_by_site/klass' id='klass' >Class</a> 
        &gt; <a class='level-button' type='button'  href='/taxa/abundance_by_site/order' id='order' onclick="change_level('order')">Order</a> 
        &gt; <a class='level-button' type='button'  href='/taxa/abundance_by_site/family' id='family' onclick="change_level('family')">Family</a> 
        &gt; <a class='level-button' type='button'  href='/taxa/abundance_by_site/genus' id='genus' onclick="change_level('genus')">Genus</a> 
        &gt; <a class='level-button' type='button'  href='/taxa/abundance_by_site/species' id='species' onclick="change_level('species')">Species</a>
         </div>
      
      </div>
     
     
      
      </center> 
      <br>
      <center>
      <small><b>Rank Level:<%= showrank %></b>: List of the ten most abundant taxa at each oral site.
      <br>The abundance values are taken by averaging the available relative abundance data from the four
      studies:<br><a href='https://genomebiology.biomedcentral.com/articles/10.1186/gb-2012-13-6-r42' target='_blank'>segata (2012)</a>, 
      <a href='https://www.pnas.org/content/111/28/E2875.short' target='_blank'>Eren (2014) V1-V3 and V3-V5</a> and
      Dewhirst (unpublished)
    </small>
<table id='master'>
<tr>
  <td align='center'>
    <table class='site-table'>
      <tr class='header'><th colspan='2'>Buccal Mucosa (BM)</th></tr>
      <tr><th><%= showrank %></th><th>Abundance</th></tr>
      <% for(n in sitedata['BM']) { %>
        <% if(rank === 'species'){ %>
           <% link = '/taxa/tax_description?otid=' + sitedata['BM'][n]['otid'] %>
        <% }else{ %>
            <% link = '/taxa/life?rank=' + rank + '&name=' + sitedata['BM'][n]['name'] %>
        <% } %>
        <tr><td><a href='<%= link %>'><%= sitedata['BM'][n]['name'] %></a></td><td><%= sitedata['BM'][n]['value'] %></td></tr>
      <% } %>
    </table>
  </td>
  <td align='center'>
    <table class='site-table'>
      <tr class='header'><th colspan='2'>Keratinized Gingiva (KG)</th></tr>
      <tr><th><%= showrank %></th><th>Abundance</th></tr>
      <% for(n in sitedata['KG']) { %>
        <% if(rank === 'species'){ %>
           <% link = '/taxa/tax_description?otid=' + sitedata['KG'][n]['otid'] %>
        <% }else{ %>
            <% link = '/taxa/life?rank=' + rank + '&name=' + sitedata['KG'][n]['name'] %>
        <% } %>
        <tr><td><a href='<%= link %>'><%= sitedata['KG'][n]['name'] %></a></td><td><%= sitedata['KG'][n]['value'] %></td></tr>
      <% } %>
    </table>
  </td>
  <td align='center'>
    <table class='site-table'>
      <tr class='header'><th colspan='2'>Hard Palate (HP)</th></tr>
      <tr><th><%= showrank %></th><th>Abundance</th></tr>
      <% for(n in sitedata['HP']) { %>
        <% if(rank === 'species'){ %>
           <% link = '/taxa/tax_description?otid=' + sitedata['HP'][n]['otid'] %>
        <% }else{ %>
            <% link = '/taxa/life?rank=' + rank + '&name=' + sitedata['HP'][n]['name'] %>
        <% } %>
        <tr><td><a href='<%= link %>'><%= sitedata['HP'][n]['name'] %></a></td><td><%= sitedata['HP'][n]['value'] %></td></tr>
      <% } %>
    </table>
  </td>
  
  </tr><tr>
  
  <td align='center'>
    <table class='site-table'>
      <tr class='header'><th colspan='2'>Tongue Dorsum (TD)</th></tr>
      <tr><th><%= showrank %></th><th>Abundance</th></tr>
      <% for(n in sitedata['TD']) { %>
        <% if(rank === 'species'){ %>
           <% link = '/taxa/tax_description?otid=' + sitedata['TD'][n]['otid'] %>
        <% }else{ %>
            <% link = '/taxa/life?rank=' + rank + '&name=' + sitedata['TD'][n]['name'] %>
        <% } %>
        <tr><td><a href='<%= link %>'><%= sitedata['TD'][n]['name'] %></a></td><td><%= sitedata['TD'][n]['value'] %></td></tr>
      <% } %>
    </table>
  </td>
  <td align='center'>
    <table class='site-table'>
      <tr class='header'><th colspan='2'>Palatine Tonsils (PT)</th></tr>
      <tr><th><%= showrank %></th><th>Abundance</th></tr>
      <% for(n in sitedata['PT']) { %>
        <% if(rank === 'species'){ %>
           <% link = '/taxa/tax_description?otid=' + sitedata['PT'][n]['otid'] %>
        <% }else{ %>
            <% link = '/taxa/life?rank=' + rank + '&name=' + sitedata['PT'][n]['name'] %>
        <% } %>
        <tr><td><a href='<%= link %>'><%= sitedata['PT'][n]['name'] %></a></td><td><%= sitedata['PT'][n]['value'] %></td></tr>
      <% } %>
    </table>
  </td>
  <td align='center'>
    <table class='site-table'>
      <tr class='header'><th colspan='2'>Throat (TH)</th></tr>
      <tr><th><%= showrank %></th><th>Abundance</th></tr>
      <% for(n in sitedata['TH']) { %>
        <% if(rank === 'species'){ %>
           <% link = '/taxa/tax_description?otid=' + sitedata['TH'][n]['otid'] %>
        <% }else{ %>
            <% link = '/taxa/life?rank=' + rank + '&name=' + sitedata['TH'][n]['name'] %>
        <% } %>
        <tr><td><a href='<%= link %>'><%= sitedata['TH'][n]['name'] %></a></td><td><%= sitedata['TH'][n]['value'] %></td></tr>
      <% } %>
    </table>
  </td>

</tr><tr>
  
  <td align='center'>
    <table class='site-table'>
      <tr class='header'><th colspan='2'>Saliva (SV)</th></tr>
      <tr><th><%= showrank %></th><th>Abundance</th></tr>
      <% for(n in sitedata['SV']) { %>
        <% if(rank === 'species'){ %>
           <% link = '/taxa/tax_description?otid=' + sitedata['SV'][n]['otid'] %>
        <% }else{ %>
            <% link = '/taxa/life?rank=' + rank + '&name=' + sitedata['SV'][n]['name'] %>
        <% } %>
        <tr><td><a href='<%= link %>'><%= sitedata['SV'][n]['name'] %></a></td><td><%= sitedata['SV'][n]['value'] %></td></tr>
      <% } %>
    </table>
  </td>
  <td align='center'>
    <table class='site-table'>
      <tr class='header'><th colspan='2'>Supra-gingival Plaque (SupP)</th></tr>
      <tr><th><%= showrank %></th><th>Abundance</th></tr>
      <% for(n in sitedata['SupP']) { %>
        <% if(rank === 'species'){ %>
           <% link = '/taxa/tax_description?otid=' + sitedata['SupP'][n]['otid'] %>
        <% }else{ %>
            <% link = '/taxa/life?rank=' + rank + '&name=' + sitedata['SupP'][n]['name'] %>
        <% } %>
        <tr><td><a href='<%= link %>'><%= sitedata['SupP'][n]['name'] %></a></td><td><%= sitedata['SupP'][n]['value'] %></td></tr>
      <% } %>
    </table>
  </td>
  <td align='center'>
    <table class='site-table'>
      <tr class='header'><th colspan='2'>Sub-gingival Plaque (SubP)</th></tr>
      <tr><th><%= showrank %></th><th>Abundance</th></tr>
      <% for(n in sitedata['SubP']) { %>
        <% if(rank === 'species'){ %>
           <% link = '/taxa/tax_description?otid=' + sitedata['SubP'][n]['otid'] %>
        <% }else{ %>
            <% link = '/taxa/life?rank=' + rank + '&name=' + sitedata['SubP'][n]['name'] %>
        <% } %>
        <tr><td><a href='<%= link %>'><%= sitedata['SubP'][n]['name'] %></a></td><td><%= sitedata['SubP'][n]['value'] %></td></tr>
      <% } %>
    </table>
  </td>  
  
  </tr><tr>
  
  <td align='center'>
    <table class='site-table'>
      <tr class='header'><th colspan='2'>Nasal (NS)</th></tr>
      <tr><th><%= showrank %></th><th>Abundance</th></tr>
      <% for(n in sitedata['NS']) { %>
        <% if(rank === 'species'){ %>
           <% link = '/taxa/tax_description?otid=' + sitedata['NS'][n]['otid'] %>
        <% }else{ %>
            <% link = '/taxa/life?rank=' + rank + '&name=' + sitedata['NS'][n]['name'] %>
        <% } %>
        <tr><td><a href='<%= link %>'><%= sitedata['NS'][n]['name'] %></a></td><td><%= sitedata['NS'][n]['value'] %></td></tr>
      <% } %>
    </table>
  </td>
  <td align='center'>
    <table class='site-table'>
      <tr class='header'><th colspan='2'>Stool (ST)</th></tr>
      <tr><th><%= showrank %></th><th>Abundance</th></tr>
      <% for(n in sitedata['ST']) { %>
        <% if(rank === 'species'){ %>
           <% link = '/taxa/tax_description?otid=' + sitedata['ST'][n]['otid'] %>
        <% }else{ %>
            <% link = '/taxa/life?rank=' + rank + '&name=' + sitedata['ST'][n]['name'] %>
        <% } %>
        <tr><td><a href='<%= link %>'><%= sitedata['ST'][n]['name'] %></a></td><td><%= sitedata['ST'][n]['value'] %></td></tr>
      <% } %>
    </table>
  </td>
  
</tr>      
</table>      
</center>    
    </div> <!-- end: page-content -->
    <div id='footer'>
         <%- include('../../partials/footer'); %>
    </div>
       
   
 </div>
</body>

</html>

<script type="text/javascript" src="/js/jquery-2.1.1.min.js"></script> 
<script type="text/javascript" src="/js/taxonomy.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>
<script>
  mainmenu()
  rank = '<%= rank %>'
  $(document).ready(function(){                    
   var ranks = [ "phylum", "klass", "order", "family", "genus", "species"];
  // for(n in ranks){
//     document.getElementById(ranks[n]).style ='font-weight:normal;color:black;'
//   }
    document.getElementById(rank).style ='font-weight:bold;font-size:18px;color:#cf1020;'
});

</script>

