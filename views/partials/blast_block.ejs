
<link rel="stylesheet" type="text/css" href="/css/blast.css" >
<% if(blastFxn == 'genome'){ %>
<style>
  #other70 {
   background:var(--div-bg017);
  }
</style>
<% }else{ %>
<style>
  #other70 {
   background:var(--div-bg01);
  }
</style>
<% } %>
<center>
<div id='center70pct_div'>
    


<form id='blastForm' name='blastForm' method='POST' action='/blast/blast_post' enctype='multipart/form-data' >

  <div id='other70'>
       <div class='block-title' >BLAST Program and Database:</div>
       <div class='adjust_block'>

       <% if(blastFxn == 'genome'){ %>
        <a href='/help/help-page?pagecode=blast/programs'>Program</a>:
        <select class='dropdown' id='blastProg' name='blastProg' onchange="changeBlastGenomeDbs('<%= gid %>',this.value)">
              <% for(n in blast_prg){ %>
                <option value='<%= blast_prg[n].toLowerCase() %>'><%= blast_prg[n] %></option>
              <% } %>
        </select>

    <% }else{ %>
        <a href='/help/help-page?pagecode=blast/programs'>Program: BLASTN</a>
        <input type='hidden' name='blastProg' value='blastn' >

    <% } %>
        <% if(blastFxn == 'genome'){ %>
	    <div style='float:right'><small>
              <input type='radio' checked name='blastAnno' value='prokka' id='blast_prokka_rb'>PROKKA&nbsp;&nbsp;&nbsp;
              <input type='radio'         name='blastAnno' value='ncbi' id='blast_ncbi_rb'>NCBI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          </small>
        </div>
        <% } %>  <br><center>
	   <a href='/help/help-page?pagecode=blast/databases'>Database</a>:
	   <span id='genomeBlastDbChoices'>
		 <select class='dropdown' id='blastDb' name='blastDb'>
		   <% for(n in db_choices){ %>
			 <option value='<%= db_choices[n].filename %>'><%= db_choices[n].name %></option>
		   <% } %>
		 </select>
	   </span>
	   </center>
       </div>

       <% if(blastFxn == 'genome'){ %>
           <% if(gid == 'all'){ %>
             <div class='block-title' >BLAST Against All HOMD Genome Sequences</div>
           <% }else{ %>
             <div class='block-title' >BLAST Against "<%= organism %>" Genome Sequence</div>
           <% } %>
           Copy and paste sequence(s) below, preferably in FASTA format:





       <% }else{ %>
           <div class='block-title' >Upload your 16S rRNA Sequences:</div>
           Copy and paste sequence(s) below, preferably in FASTA format:
       <% } %>



           <center>
            <textarea class="textinput" id='textinput' placeholder="Enter sequence(s) in FASTA format..." name='inputSeq' ></textarea>
           </center>
           Or upload a sequence file from your computer:
           <input type="file" id='fileInput' name="blastFile"  >

<br><br>
<small>
(<b>Note1</b>: Multiple sequences can be uploaded, please check <a href='/help/help-page?pagecode=blast/formats'>examples on sequence formats and restrictions.</a>)
<br>
(<b>Note2</b>: Current upload limit is <%= blast_max.seqs %> sequences
or <%= blast_max.size %> MB filesize.)
</small>
<br><br>


	   <div class='block-title' >Adjust Blast Parameters (Optional):</div>



    <div class='adjust_block'>
           <a href='/help/help-page?pagecode=blast/parameters'>Expect</a>:
           <select class='dropdown' id='blastExpect' name='blastExpect'>
              <option selected='selected' value='0.0001'>0.0001</option>
              <option value='0.01'>0.01</option>
              <option value='0.1'>0.1</option>
              <option value='1'>1</option>
              <option value='10'>10</option>
              <option value='100'>100</option>
              <option value='1000'>1000</option>
           </select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

   

          <a href='/help/help-page?pagecode=blast/parameters'>Maximum Target Sequences</a>:
           <select class='dropdown' id='blastMaxTargetSeqs' name='blastMaxTargetSeqs'>
              <% if(blastFxn == 'genome'){ %>
                <option value='20'>20</option>
                <option value='50'>50</option>
                <option selected='selected' value='100'>100</option>
              <% }else{ %>
                <option selected='selected' value='20'>20</option>
                <option value='50'>50</option>
                <option value='100'>100</option>
              <% } %>
              <option value='250'>250</option>
              <option value='500'>500</option>
           </select>
           
    </div>

    <div class='adjust_block'>
           <a href='/help/help-page?pagecode=blast/advanced'>Other Advanced Options:</a>
       <% if(blastFxn == 'genome'){ %>
        <input class='dropdown' id='advancedOpts' name='advancedOpts' type='text' value='' maxlength='100' size='50'>
      <% }else{ %>
        <input class='dropdown' id='advancedOpts' name='advancedOpts' type='text' value='-penalty -3 -reward 2 -gapopen 5 -gapextend 2' maxlength='100' size='50'>
      <% } %>
    </div>

    <div class='adjust_block'>
           <span onclick="reset2default('<%= blastFxn %>')" class='pill pill-brown pill-lg'>Reset to Defaults</span>
    </div>
    <div class='adjust_block'>
         <center><input class='pill pill-brown pill-lg' type='button' value='Blast' onclick='blastFormCheck()' \></center>
    </div>
    </div> <!-- End other70 -->
<% if(blastFxn == 'genome'){ %>

    <% }else{ %>
         <small>This tool identifies the closest matches of 16S rRNA sequences submitted by users among the HOMD or other 16S rRNA gene sequences.
        The sequence search is based on the NCBI BLASTN version 2.9.0+ <a href='/help/help-page?pagecode=blast/formats'>[DETAIL]</a>
        </small>
    <% } %>
  
  <input type='hidden' name='returnTo' value='<%= returnTo %>' >
    <input type='hidden' name='blastFxn' value='<%= blastFxn %>' >
</form>
</div>
</center>
<script type="text/javascript" src="/js/blast.js"></script>
