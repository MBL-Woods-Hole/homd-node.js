HOMD Notes
2022-02-02
From JMW
1: For Eren V1-V3, Eren V3-V5, and Dewhirst, where you currently have Avg (50th percentile abundance), 
Stdev, and Prev, can you add rows for 10th percentile abundance and 90th percentile abundance?

3. I suggest a bar chart on the page https://node.homd.info/taxa/ecology
 showing 10 bars, one for each of 9 oral sites plus nasal, as a visual that will 
 show the similarities and differences among sites.
Something like figure 1A in Segata et al. 2012 but showing species where they show genera.
https://genomebiology.biomedcentral.com/articles/10.1186/gb-2012-13-6-r42/figures/1
Let me know if you'd like some help designing such a bar chart.  
The species should be grouped by taxonomy rather than abundance, and with a color scheme 
where related species have a similar color, as in the Segata et al. figure.

2022-02-01
  idea: archyeopterix?
  vamps krona js target plot - useful for homd?
  ppangolin?
  
  Fixed: search for 'accolens' in genome table should get 9 rows
  Abundance
  top hits for abundance per subhabitat
  krona graph for each oral habitat?
  
2022-01
Fix taxonomy steps
1- replace taxonomy table
   SET FOREIGN_KEY_CHECKS=0
   update subspecies set subspecies = REPLACE(subspecies, ' ', '_') 
   WHERE `subspecies` like '%[%' or `subspecies` like '%(%'
2- remove all the [] and () taxanames from domain..species that have '_'
3 - load taxonomy and check
4 - change all the [] and () taxnames to underscores
5 re-run update taxonomy script:
    floyd avoorhis$ ../update_homd_taxonomy_byFile.py -i homd_ncbi_blast_all_tophits-KISS.csv -g
2021-12-10
Abundance files changes to match db:
   2021-11-05 :: HMT-191:Changed genus from Propionibacterium to Acidipropionibacterium
   2021-11-05 :: HMT-701:Changed genus from Actinomyces to Schaalia  *partial which species

12-07-21
DONE #666 - Corynebacteria Matruchochi -- what is Reference Strain (None, not yet cultivated) for Jessica
     ans - It is type strain
     if status ==named then has 
     otid::2  phylotype
      1,389 Named  use type strain (see 14)
     20 unnamed
     11 lost
     !!     269 Lost [] yet old site has ref strain:  Smibert D15A-4   IMPORTANT not in my db!
---------------------------------     
DONE in Search Result:: put genus species where HMT and SEQF are showing (maybe phage too)
--- Download Abundance data - how & where?

Meeting:
DONE Hide "site" for time being
DONE: Hide all phage pages
Plan for abundance table in DB
Create abundance Table with dewhirst and eren sum up ranks for all abund data => python script
Abundance graph: remove Groups; text to be domain only?? ask jess


2021-11-30
blast tblastn got a warning in blasterror.txt
 with no hits found -- should read blast results BEFORE blasterror.txt
ADD Note:  to blast wait: **please do not leave page**
Pull test genome db to home macbook for testing
Ask George: html (genomic) vs json (refseq) and table
-How to download an html output?
Where to add schema - download? put a date on it
Add flag table to db: status,site what others?

2021-11-22
put a notes section on the taxon desc page and in the db
Also a db update page


2021-11-12
genomes blast db link not working:

blastn -db /mnt/efs/lv1_dev/blastdb/current/blastdb/genomes/ffn/ALL_genomes.ffn
BLAST Database error: Could not find volume or alias file (ftp/ffn/ALL_genomes.ffn.00) 
referenced in alias file (/mnt/efs/lv1_dev/blastdb/V9.14/blastdb/genomes/ffn/ALL_genomes.ffn).

blastn -db /mnt/efs/lv1_dev/blastdb/current/blast_db/oral16S/HOMD_16S_rRNA_RefSeq_V15.22.p9.fasta -query blast0.fa


2021-11-08
Meet w/ George tomorrow
-paths blast
/mnt/efs/lv1_dev/blastdb/current/blastdb/genomes/
    faa   SEQF3676.faa*
    ffn   SEQF3676.ffn
    fna   SEQF3676.fna
  
All genomes:
    
    blastn & tblastn & tblastx 2dbs: "Genomic DNA from all HOMD Genomes"         path:?  fna
                                     "DNA Sequences of Proteins from all HOMD Genomes" path:?  ffn 
    
    blastp and blastx 1db: "Proteins Annotated from all HOMD Genomes"             path:?  faa 
    
Refseq:  /mnt/efs/lv1_dev/blastdb/blast_db/oral16S

-captcha Google (do we (homd) have a google account? yes)
-database update list to show on site


DONE -mysqlworkbench schema: db reverse engineer
DONE -redo mysql dump schema and fix MBL db:
DONE:    ALTER TABLE taxonomy ADD CONSTRAINT taxonomy_fk_klass_id FOREIGN KEY (klass_id) REFERENCES klass(klass_id) ON UPDATE CASCADE;
DONE -Clean up genomes and genomes_extra tables: make primary key
DONE -cron job  or removing blast jobs  => sudo nano /etc/cron.monthly/standard
DONE: genome description when you place an unknown into url: We're Sorry -- Something Broke!